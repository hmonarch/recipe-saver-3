{"version":3,"sources":["webpack:///./src/components/ResetForm.vue?a697","webpack:///src/components/ResetForm.vue","webpack:///./src/components/ResetForm.vue?7794","webpack:///./src/components/ResetForm.vue","webpack:///./src/services/MiscService.js","webpack:///./src/components/ResetForm.vue?5698","webpack:///./src/assets/logo-255x255.png"],"names":["render","_vm","this","_h","$createElement","_c","_self","staticClass","attrs","id","to","path","src","__webpack_require__","_v","_s","userEmail","directives","name","rawName","value","expression","on","submit","$event","preventDefault","resetPassword","type","placeholder","domProps","input","target","composing","password","passwordConfirm","hidden","_e","errorMessage","click","staticRenderFns","ResetFormvue_type_script_lang_js_","data","tokenValid","errors","methods","verifyToken","_verifyToken","Object","asyncToGenerator","regeneratorRuntime","mark","_callee","token","response","wrap","_context","prev","next","MiscService","sent","console","log","message","stop","_x","apply","arguments","passwordIsValid","length","push","_resetPassword","_callee2","_context2","join","abrupt","$route","params","$router","created","components_ResetFormvue_type_script_lang_js_","component","componentNormalizer","__webpack_exports__","_services_Api__WEBPACK_IMPORTED_MODULE_0__","uploadImage","imageFile","fd","FormData","append","Api","post","headers","Content-Type","getUserInfo","get","sendPasswordRecovery","concat","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ResetForm_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0__","_node_modules_mini_css_extract_plugin_dist_loader_js_ref_8_oneOf_1_0_node_modules_css_loader_index_js_ref_8_oneOf_1_1_node_modules_vue_loader_lib_loaders_stylePostLoader_js_node_modules_postcss_loader_src_index_js_ref_8_oneOf_1_2_node_modules_sass_loader_lib_loader_js_ref_8_oneOf_1_3_node_modules_cache_loader_dist_cjs_js_ref_0_0_node_modules_vue_loader_lib_index_js_vue_loader_options_ResetForm_vue_vue_type_style_index_0_lang_scss___WEBPACK_IMPORTED_MODULE_0___default","n","module","exports","p"],"mappings":"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","file":"js/chunk-3c40b81c.c89db39f.js","sourcesContent":["var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login-register-box\",attrs:{\"id\":\"reset-form\"}},[_c('div',{staticClass:\"main-box\"},[_c('div',{staticClass:\"main-header\"},[_c('router-link',{staticClass:\"logo-link\",attrs:{\"to\":{ path: '/' }}},[_c('img',{staticClass:\"logo\",attrs:{\"src\":require(\"../assets/logo-255x255.png\")}})]),_c('router-link',{staticClass:\"logo-link\",attrs:{\"to\":{ path: '/' }}},[_c('div',{staticClass:\"logo-text\"},[_vm._v(\"Recipe Saver\")])])],1),_c('div',{staticClass:\"main-body\"},[(_vm.tokenValid)?_c('div',{staticClass:\"reset-form-body\"},[_c('div',{staticClass:\"your-email\"},[_c('b',[_vm._v(\"Email:\")]),_c('span',{attrs:{\"id\":\"user-email\"}},[_vm._v(\" \"+_vm._s(_vm.userEmail))])]),_c('label',{staticClass:\"create-new\"},[_vm._v(\"Create New Password\")]),_c('form',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tokenValid),expression:\"tokenValid\"}],staticClass:\"reset-form\",on:{\"submit\":function($event){$event.preventDefault();return _vm.resetPassword()}}},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.password),expression:\"password\"}],attrs:{\"id\":\"password\",\"type\":\"password\",\"placeholder\":\"Password\"},domProps:{\"value\":(_vm.password)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.password=$event.target.value}}}),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.passwordConfirm),expression:\"passwordConfirm\"}],attrs:{\"id\":\"password-confirm\",\"type\":\"password\",\"placeholder\":\"Confirm password\"},domProps:{\"value\":(_vm.passwordConfirm)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.passwordConfirm=$event.target.value}}}),_c('input',{attrs:{\"type\":\"submit\",\"hidden\":\"\"}})])]):_vm._e(),_c('div',{staticClass:\"error-message\"},[_vm._v(\"\\n        \"+_vm._s(_vm.errorMessage)+\"\\n      \")])]),_c('div',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.tokenValid),expression:\"tokenValid\"}],staticClass:\"reset-password-cta\",on:{\"click\":function($event){return _vm.resetPassword()}}},[_vm._v(\"Reset Password\")])])])}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\r\n  <div id=\"reset-form\" class=\"login-register-box\">\r\n    <div class=\"main-box\">\r\n      <div class=\"main-header\">\r\n        <router-link :to=\"{ path: '/' }\" class=\"logo-link\">\r\n          <img class=\"logo\" src=\"../assets/logo-255x255.png\">\r\n        </router-link>\r\n        <router-link :to=\"{ path: '/' }\" class=\"logo-link\">\r\n          <div class=\"logo-text\">Recipe Saver</div>\r\n        </router-link>\r\n      </div>\r\n      <div class=\"main-body\">\r\n        <div v-if=\"tokenValid\" class=\"reset-form-body\">\r\n          <div class=\"your-email\"><b>Email:</b><span id=\"user-email\"> {{ userEmail }}</span></div>\r\n          <label class=\"create-new\">Create New Password</label>\r\n          <form v-show=\"tokenValid\" class=\"reset-form\" @submit.prevent=\"resetPassword()\">\r\n            <input v-model=\"password\" id=\"password\" type=\"password\" placeholder=\"Password\">\r\n            <input v-model=\"passwordConfirm\" id=\"password-confirm\" type=\"password\" placeholder=\"Confirm password\">\r\n            <input type=\"submit\" hidden>\r\n          </form>\r\n        </div>\r\n\r\n        <div class=\"error-message\">\r\n          {{ errorMessage }}\r\n        </div>\r\n      </div>\r\n      <div v-show=\"tokenValid\" class=\"reset-password-cta\" @click=\"resetPassword()\">Reset Password</div>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport MiscService from '@/services/MiscService';\r\n\r\nexport default {\r\n  data() {\r\n    return {\r\n      tokenValid: false,\r\n      errorMessage: '',\r\n      userEmail: '',\r\n      password: '',\r\n      passwordConfirm: '',\r\n      errors: [],\r\n    };\r\n  },\r\n  methods: {\r\n    async verifyToken(token) {\r\n      const response = await MiscService.verifyToken(token);\r\n      console.log('response', response.data);\r\n\r\n      if (response.data && response.data.message !== 'ok') {\r\n        this.errorMessage = response.data.message;\r\n      } else if (response.data.message === 'ok') {\r\n        this.tokenValid = true;\r\n        this.userEmail = response.data.userEmail\r\n        console.log('all good');\r\n      }\r\n    },\r\n    passwordIsValid() {\r\n      this.errors = [];\r\n\r\n      if (!this.password.length) this.errors.push('Password required');\r\n      else if (this.password !== this.passwordConfirm) this.errors.push('Passwords must match');\r\n      else if (this.password.length < 8) this.errors.push('Password must be 8 or more characters');\r\n      else if (this.password.length > 30) this.errors.push('Password must be 30 characters or less'); \r\n\r\n      if (!this.errors.length) return true;\r\n    },\r\n    async resetPassword() {\r\n      this.passwordIsValid();\r\n      if (!this.passwordIsValid()) {\r\n        this.errorMessage = this.errors.join('<br>');\r\n        return;\r\n      }\r\n\r\n      this.errorMessage = '';\r\n      const response = await MiscService.resetPassword({ token: this.$route.params.token, password: this.password });\r\n\r\n      console.log('response', response.data);\r\n\r\n      if (response.data.message !== 'Password changed') {\r\n        this.errorMessage = response.data.message;\r\n      } else {\r\n        this.$router.push('/login?login-reg-msg=password-reset');\r\n      }\r\n    },\r\n\r\n  },\r\n  created() {\r\n    this.verifyToken(this.$route.params.token);\r\n  }\r\n}\r\n</script>\r\n\r\n<style lang=\"scss\">\r\n@import '@/styles/_login-register-box.scss';\r\n#reset-form {\r\n  .main-body {\r\n    padding: 20px;\r\n    text-align: left;\r\n    line-height: 20px;\r\n\r\n    .create-new {\r\n      font-weight: bold;\r\n      margin: 20px 0 10px 0;\r\n      display: block;\r\n    }\r\n\r\n    .reset-form {\r\n      input {\r\n        width: 100%;\r\n        height: 34px;\r\n        padding: 15px 5px;\r\n        box-sizing: border-box;\r\n\r\n        &:first-child {\r\n          margin-bottom: 10px;\r\n        }\r\n      }\r\n    }\r\n\r\n    .error-message {\r\n      color: #f00;\r\n      margin-top: 10px;\r\n    }\r\n  }\r\n\r\n  .reset-password-cta {\r\n    cursor: pointer;\r\n    box-sizing: border-box;\r\n    background-color: #089de3;\r\n    color: #fff;\r\n    padding: 20px;\r\n    border-radius: 0 0 6px 6px;\r\n    text-transform: uppercase;\r\n    font-size: 18px;\r\n    border-bottom: solid 1px #089de3;\r\n    letter-spacing: 0.5px;\r\n    font-weight: bold;\r\n\r\n    &:hover {\r\n      filter: brightness(120%);\r\n    }\r\n  }\r\n}\r\n</style>\r\n\r\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetForm.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetForm.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./ResetForm.vue?vue&type=template&id=51f339fe&\"\nimport script from \"./ResetForm.vue?vue&type=script&lang=js&\"\nexport * from \"./ResetForm.vue?vue&type=script&lang=js&\"\nimport style0 from \"./ResetForm.vue?vue&type=style&index=0&lang=scss&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports","import Api from '@/services/Api';\r\n\r\nexport default {\r\n  uploadImage(imageFile) {\r\n\r\n    const fd = new FormData();\r\n    fd.append('image-file', imageFile);\r\n\r\n    return Api().post('account-image-upload', fd, {\r\n      headers: {\r\n        'Content-Type': 'multipart/form-data;',\r\n      }\r\n    });\r\n  },\r\n  getUserInfo() {\r\n    return Api().get('user-info');\r\n  },\r\n  sendPasswordRecovery(data) {\r\n    return Api().post('send-password-recovery', data);\r\n  },\r\n  verifyToken(token) {\r\n    return Api().get(`reset/${token}`);\r\n  },\r\n  resetPassword(data) {\r\n    return Api().post(`reset`, data);\r\n  }\r\n}","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetForm.vue?vue&type=style&index=0&lang=scss&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--8-oneOf-1-0!../../node_modules/css-loader/index.js??ref--8-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--8-oneOf-1-2!../../node_modules/sass-loader/lib/loader.js??ref--8-oneOf-1-3!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./ResetForm.vue?vue&type=style&index=0&lang=scss&\"","module.exports = __webpack_public_path__ + \"img/logo-255x255.2ed04cf9.png\";"],"sourceRoot":""}