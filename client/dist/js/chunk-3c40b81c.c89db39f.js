(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-3c40b81c"],{5354:function(s,e,r){"use strict";r.r(e);var t=function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",{staticClass:"login-register-box",attrs:{id:"reset-form"}},[t("div",{staticClass:"main-box"},[t("div",{staticClass:"main-header"},[t("router-link",{staticClass:"logo-link",attrs:{to:{path:"/"}}},[t("img",{staticClass:"logo",attrs:{src:r("f44d")}})]),t("router-link",{staticClass:"logo-link",attrs:{to:{path:"/"}}},[t("div",{staticClass:"logo-text"},[s._v("Recipe Saver")])])],1),t("div",{staticClass:"main-body"},[s.tokenValid?t("div",{staticClass:"reset-form-body"},[t("div",{staticClass:"your-email"},[t("b",[s._v("Email:")]),t("span",{attrs:{id:"user-email"}},[s._v(" "+s._s(s.userEmail))])]),t("label",{staticClass:"create-new"},[s._v("Create New Password")]),t("form",{directives:[{name:"show",rawName:"v-show",value:s.tokenValid,expression:"tokenValid"}],staticClass:"reset-form",on:{submit:function(e){return e.preventDefault(),s.resetPassword()}}},[t("input",{directives:[{name:"model",rawName:"v-model",value:s.password,expression:"password"}],attrs:{id:"password",type:"password",placeholder:"Password"},domProps:{value:s.password},on:{input:function(e){e.target.composing||(s.password=e.target.value)}}}),t("input",{directives:[{name:"model",rawName:"v-model",value:s.passwordConfirm,expression:"passwordConfirm"}],attrs:{id:"password-confirm",type:"password",placeholder:"Confirm password"},domProps:{value:s.passwordConfirm},on:{input:function(e){e.target.composing||(s.passwordConfirm=e.target.value)}}}),t("input",{attrs:{type:"submit",hidden:""}})])]):s._e(),t("div",{staticClass:"error-message"},[s._v("\n        "+s._s(s.errorMessage)+"\n      ")])]),t("div",{directives:[{name:"show",rawName:"v-show",value:s.tokenValid,expression:"tokenValid"}],staticClass:"reset-password-cta",on:{click:function(e){return s.resetPassword()}}},[s._v("Reset Password")])])])},a=[],o=(r("96cf"),r("3b8d")),n=r("7b73"),i={data:function(){return{tokenValid:!1,errorMessage:"",userEmail:"",password:"",passwordConfirm:"",errors:[]}},methods:{verifyToken:function(){var s=Object(o["a"])(regeneratorRuntime.mark(function s(e){var r;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:return s.next=2,n["a"].verifyToken(e);case 2:r=s.sent,console.log("response",r.data),r.data&&"ok"!==r.data.message?this.errorMessage=r.data.message:"ok"===r.data.message&&(this.tokenValid=!0,this.userEmail=r.data.userEmail,console.log("all good"));case 5:case"end":return s.stop()}},s,this)}));function e(e){return s.apply(this,arguments)}return e}(),passwordIsValid:function(){if(this.errors=[],this.password.length?this.password!==this.passwordConfirm?this.errors.push("Passwords must match"):this.password.length<8?this.errors.push("Password must be 8 or more characters"):this.password.length>30&&this.errors.push("Password must be 30 characters or less"):this.errors.push("Password required"),!this.errors.length)return!0},resetPassword:function(){var s=Object(o["a"])(regeneratorRuntime.mark(function s(){var e;return regeneratorRuntime.wrap(function(s){while(1)switch(s.prev=s.next){case 0:if(this.passwordIsValid(),this.passwordIsValid()){s.next=4;break}return this.errorMessage=this.errors.join("<br>"),s.abrupt("return");case 4:return this.errorMessage="",s.next=7,n["a"].resetPassword({token:this.$route.params.token,password:this.password});case 7:e=s.sent,console.log("response",e.data),"Password changed"!==e.data.message?this.errorMessage=e.data.message:this.$router.push("/login?login-reg-msg=password-reset");case 10:case"end":return s.stop()}},s,this)}));function e(){return s.apply(this,arguments)}return e}()},created:function(){this.verifyToken(this.$route.params.token)}},d=i,c=(r("c294"),r("2877")),u=Object(c["a"])(d,t,a,!1,null,null,null);e["default"]=u.exports},"7b73":function(s,e,r){"use strict";var t=r("3f4a");e["a"]={uploadImage:function(s){var e=new FormData;return e.append("image-file",s),Object(t["a"])().post("account-image-upload",e,{headers:{"Content-Type":"multipart/form-data;"}})},getUserInfo:function(){return Object(t["a"])().get("user-info")},sendPasswordRecovery:function(s){return Object(t["a"])().post("send-password-recovery",s)},verifyToken:function(s){return Object(t["a"])().get("reset/".concat(s))},resetPassword:function(s){return Object(t["a"])().post("reset",s)}}},c294:function(s,e,r){"use strict";var t=r("cb9e"),a=r.n(t);a.a},cb9e:function(s,e,r){},f44d:function(s,e,r){s.exports=r.p+"img/logo-255x255.2ed04cf9.png"}}]);
//# sourceMappingURL=chunk-3c40b81c.c89db39f.js.map